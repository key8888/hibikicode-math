# hibikicode-math

中学生・高校生向けに、Python で一次関数や二次関数のグラフを描きながらプログラミングの楽しさを体験できる学習環境です。

## 主要機能
- 画面右側に Monaco Editor を配置し、Python コードを編集・実行できます。
- 左側の表示エリアはタブで切り替え可能で、Bokeh によるグラフ描画と実行ログを表示します。
- コードの実行時間・標準出力・エラー内容を確認できます。
- 教材 (.md) を読み込み、学習の進捗にあわせて順番に表示します。次の教材へ進む際には「先生に確認しましたか？」というメッセージと 4 桁パスワード (初期値 8858) を要求します。
- ユーザーコードはサンドボックス化された別プロセスで実行し、時間・メモリ・ファイル操作を制限して安全に動作させます。

## 動作環境
- Python 3.10 以上を推奨
- Node.js は不要 (フロントエンドは静的ファイルで提供)

## セットアップ
1. 依存パッケージをインストールします。
   ```bash
   pip install -r requirements.txt
   ```
2. アプリケーションを起動します。
   ```bash
   uvicorn main:app --reload
   ```
3. ブラウザで `http://127.0.0.1:8000/` にアクセスすると学習環境が表示されます。

### 環境変数
| 変数名 | 説明 | 既定値 |
| --- | --- | --- |
| `LESSON_PASSWORD` | 教材のロック解除に使用する 4 桁パスワード | `8858` |
| `EXECUTION_TIMEOUT` | コード実行のタイムアウト (秒) | `3.0` |
| `EXECUTION_MEMORY_LIMIT_MB` | サンドボックスプロセスのメモリ上限 (MB) | `512` |

## 教材の追加
- `lessons/` ディレクトリに Markdown ファイル (`*.md`) を追加すると、ファイル名順に教材として読み込まれます。
- 各ファイルの先頭にある見出し (`# タイトル`) が画面の教材タイトルとして利用されます。

## ライセンス
MIT License
